<Window x:Class="LandManagementApp.Views.EditLandPlotWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:LandManagementApp.ViewModels"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Редагування ділянки" 
        Height="450" 
        Width="600"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="10">
        <StackPanel>
            <!-- Власник -->
            <TextBlock Text="Власник:" FontWeight="Bold" FontSize="14"/>
            <TextBox Text="{Binding CurrentPlot.Owner.FirstName, ValidatesOnDataErrors=True}" 
                     Margin="0 5"
                     ToolTip="Ім'я">
                <Validation.ErrorTemplate>
                    <ControlTemplate>
                        <StackPanel>
                            <AdornedElementPlaceholder/>
                            <TextBlock Text="{Binding [0].ErrorContent}" Foreground="Red" FontSize="12"/>
                        </StackPanel>
                    </ControlTemplate>
                </Validation.ErrorTemplate>
            </TextBox>

            <TextBox Text="{Binding CurrentPlot.Owner.LastName, ValidatesOnDataErrors=True}" 
                     Margin="0 5"
                     ToolTip="Прізвище">
                <Validation.ErrorTemplate>
                    <ControlTemplate>
                        <StackPanel>
                            <AdornedElementPlaceholder/>
                            <TextBlock Text="{Binding [0].ErrorContent}" Foreground="Red" FontSize="12"/>
                        </StackPanel>
                    </ControlTemplate>
                </Validation.ErrorTemplate>
            </TextBox>

            <DatePicker SelectedDate="{Binding CurrentPlot.Owner.BirthDate, ValidatesOnDataErrors=True}" 
                        Margin="0 5"
                        ToolTip="Дата народження">
                <Validation.ErrorTemplate>
                    <ControlTemplate>
                        <StackPanel>
                            <AdornedElementPlaceholder/>
                            <TextBlock Text="{Binding [0].ErrorContent}" Foreground="Red" FontSize="12"/>
                        </StackPanel>
                    </ControlTemplate>
                </Validation.ErrorTemplate>
            </DatePicker>

            <!-- Опис ділянки -->
            <TextBlock Text="Опис ділянки:" FontWeight="Bold" FontSize="14" Margin="0 10"/>
            <TextBox Text="{Binding CurrentPlot.Description.GroundWaterLevel, ValidatesOnDataErrors=True}" 
                     Margin="0 5"
                     ToolTip="Рівень ґрунтових вод (≥0)">
                <Validation.ErrorTemplate>
                    <ControlTemplate>
                        <StackPanel>
                            <AdornedElementPlaceholder/>
                            <TextBlock Text="{Binding [0].ErrorContent}" Foreground="Red" FontSize="12"/>
                        </StackPanel>
                    </ControlTemplate>
                </Validation.ErrorTemplate>
            </TextBox>

            <!-- Призначення -->
            <TextBlock Text="Призначення:" FontWeight="Bold" FontSize="14" Margin="0 10"/>
            <ComboBox ItemsSource="{x:Static vm:EditLandPlotViewModel.PurposeTypes}" 
                      SelectedItem="{Binding CurrentPlot.Purpose}"
                      DisplayMemberPath="Description"
                      Margin="0 5"
                      ToolTip="Оберіть призначення ділянки">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Description}"/>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <!-- Ринкова вартість -->
            <TextBlock Text="Ринкова вартість:" FontWeight="Bold" FontSize="14" Margin="0 10"/>
            <TextBox Text="{Binding CurrentPlot.MarketValue, ValidatesOnDataErrors=True}" 
                     Margin="0 5"
                     ToolTip="Вартість має бути додатною">
                <Validation.ErrorTemplate>
                    <ControlTemplate>
                        <StackPanel>
                            <AdornedElementPlaceholder/>
                            <TextBlock Text="{Binding [0].ErrorContent}" Foreground="Red" FontSize="12"/>
                        </StackPanel>
                    </ControlTemplate>
                </Validation.ErrorTemplate>
            </TextBox>

            <!-- Кнопки -->
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Right" 
                        Margin="0 20">
                <Button Content="Зберегти" 
                        Command="{Binding SaveCommand}" 
                        Width="100" 
                        Margin="5"
                        Background="#FF008000"
                        Foreground="White"/>
                <Button Content="Скасувати" 
                        Command="{Binding CancelCommand}" 
                        Width="100" 
                        Margin="5"
                        Background="#FFFF0000"
                        Foreground="White"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>